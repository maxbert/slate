
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#patients" class="toc-h1 toc-link" data-title="Patients">Patients</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-patients" class="toc-h2 toc-link" data-title="Get All patients">Get All patients</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-patient" class="toc-h2 toc-link" data-title="Get A specific Patient">Get A specific Patient</a>
                  </li>
                  <li>
                    <a href="#import-a-list-of-patients" class="toc-h2 toc-link" data-title="Import a list of patients">Import a list of patients</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Wellcome to the PEACH API. This is a API for storing, querying and analyzing patient reading data stored on the PEACH cluster.</p>

<p>In order to use this API, you must have your data in the basic PEACH format. The PEACH format relies on two tables, one of patients and one of readings.</p>

<p>You can read more about how to format your data in the Importing Data section of this Documentation.</p>

<p>Currently, there are no native API implementations, however, we have included curl examples of querying the http API in this Documentation.</p>
<h1 id='authentication'>Authentication</h1>
<p>Authentication is based on JWT tokens. Contact your organisation if you are unsure of what your token is. For each request, you are required to send an authorisation header with the bearer parameter.</p>

<blockquote>
<p>Authorisation looks like this:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: Bearer 123456789"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>123456789</code> with your API key.</p>
</blockquote>

<p><code>Authorization: Bearer 123456789</code></p>

<aside class="notice">
You must replace <code>123456789</code> with your personal API key.
</aside>
<h1 id='patients'>Patients</h1><h2 id='get-all-patients'>Get All patients</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://51.140.9.200/patients"</span>
  -H <span class="s2">"Authorization: Bearer 123456789"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"patients"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="s2">"Unique_ID"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="s2">"YOUR PATIENT PARAMETERS"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"organisation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR ORG"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"partitionKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR ORG-2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1aa6d443-2995-32ee8-59bb-f54ef6386efb"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hBRFAJzudVBwJAAAAAAAAAA=="</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbs/hBRFAA==/colls/hBaRFAJzuVBw=/docs/hBRFAJzuVBwJAAAAAAAAAA==/"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\"</span><span class="s2">01002d04-00200-1100-0000-5caba36c0000</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_attachments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attachments/"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">15545752364</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="s2">"Unique_ID"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="s2">"YOUR PATIENT PARAMETERS"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"organisation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR ORG"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"partitionKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR ORG-2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1aa6d443-29d95-3ee8-59bb-f54ef6386efb"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hBRFAJzuVdBwJAAAAAAAAAA=="</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbs/hBsRFAA==/colls/hBRFAJzuVBw=/docs/hBRFAJzuVBwJAAAAAAAAAA==/"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\"</span><span class="s2">01002d04-00200-1100-0000-5caba36c0000</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_attachments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attachments/"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">15543752364</span><span class="w">
      </span><span class="p">},</span><span class="w">

    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Where YOUR PATIENT PARAMETERS is replaced with your organisation&#39;s specific patient parameters.</p>
</blockquote>

<p>This endpoint retrieves all patients.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET http://51.140.9.200/patients</code></p>
<h3 id='return-object'>Return Object</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Patients</td>
<td>An array of patien objects</td>
</tr>
</tbody></table>
<h3 id='patient-object'>Patient Object</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Unique_ID</td>
<td>A patients unique identifier.</td>
</tr>
<tr>
<td>organisation</td>
<td>The organisation that the patient belongs to</td>
</tr>
<tr>
<td>partitionKey</td>
<td>A concatenation of the id and organisation</td>
</tr>
<tr>
<td>id</td>
<td>the database identifier of the database</td>
</tr>
</tbody></table>

<p>The patient object also includes keys and values specific to your organisation</p>

<aside class="success">
Remember to send your bearer token!
</aside>
<h2 id='get-a-specific-patient'>Get A specific Patient</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://51.140.9.200/patient?id=2"</span>
  -H <span class="s2">"Authorization: Bearer 123456789"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">      </span><span class="p">{</span><span class="w">
          </span><span class="s2">"Unique_ID"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="s2">"YOUR PATIENT PARAMETERS"</span><span class="p">:</span><span class="s2">"value"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"organisation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR ORG"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"partitionKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR ORG-2"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1aad6d443-2995-3ee8-59bb-f54ef6386efb"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_rid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hBRFAJzduVBwJAAAAAAAAAA=="</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbs/hBsRFAA==/colls/hBRFAJzuVBw=/docs/hBRFAJzuVBwJAAAAAAAAAA==/"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_etag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\"</span><span class="s2">010022d04-0000-1100-0000-5caba36c0000</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_attachments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attachments/"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"_ts"</span><span class="p">:</span><span class="w"> </span><span class="mi">15547523364</span><span class="w">
      </span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Where YOUR PATIENT PARAMETERS is replaced with your organisation&#39;s specific patient parameters.</p>
</blockquote>

<p>This endpoint retrieves a patient by its Unique_ID.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET http://51.140.9.200/patient?id=ID</code></p>
<h3 id='return-object-2'>Return Object</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Unique_ID</td>
<td>A patients unique identifier.</td>
</tr>
<tr>
<td>organisation</td>
<td>The organisation that the patient belongs to</td>
</tr>
<tr>
<td>partitionKey</td>
<td>A concatenation of the id and organisation</td>
</tr>
<tr>
<td>id</td>
<td>the database identifier of the database</td>
</tr>
</tbody></table>

<p>The patient object also includes keys and values specific to your organisation</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>none</td>
<td>a value matching a patients Unique_ID property</td>
<td><strong>yes</strong></td>
</tr>
</tbody></table>

<p>This request will fail with a HTTP 400 error if no id is specified</p>
<h2 id='import-a-list-of-patients'>Import a list of patients</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://51.140.9.200/patients"</span>
  -d <span class="s1">'{"Unique_ID": 2, "YOUR PATIENT PARAMETERS":"value",}'</span>
  -X POST
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Authorization: Bearer 123456789"</span>
</code></pre>
<blockquote>
<p>Where YOUR PATIENT PARAMETERS is replaced with your organisation&#39;s specific patient parameters.</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">      </span><span class="p">{</span><span class="w">
          </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
      </span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint uploads a json list of patients into the database</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST http://51.140.9.200/patients</code></p>
<h3 id='return-object-3'>Return Object</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>message</td>
<td>success or error message</td>
</tr>
</tbody></table>
<h3 id='query-body-format'>Query Body Format</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>Unique_ID</td>
<td>none</td>
<td>a patients un</td>
<td><strong>yes</strong></td>
</tr>
</tbody></table>

<p>Unique identifiers which already exist in the database will be ignored on import.</p>
<h1 id='errors'>Errors</h1>
<p>The Peach API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified resource could not be found.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
